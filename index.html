<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>XSELL CALCULADORA</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
  <style>
    body {
      background-color: #ffffff;
    }

    .calculadora {
      position: relative;
      top: 100vh;
      transition: top 1s;
    }

    .calculadora.animate {
      animation: slide-up 1s forwards;
    }

    @keyframes slide-up {
      to {
        top: 0;
      }
    }

    .modal {
      transition: all 0s ease-in-out;
      transform: scale(0.8);
      opacity: 0;
      display: none;
    }

    .modal.show {
      transform: scale(1);
      opacity: 1;
      display: block;
    }
    .card-title {
  color: #262626;
  font-size: 1.5em;
  line-height: normal;
  font-weight: 700;
  margin-bottom: 0.5em;
}

.small-desc {
  font-size: 1em;
  font-weight: 400;
  line-height: 1.5em;
  color: #452c2c;
}

.go-corner {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  width: 2em;
  height: 2em;
  overflow: hidden;
  top: 0;
  right: 0;
  background: linear-gradient(135deg, #6293c8, #384c6c);
  border-radius: 0 4px 0 32px;
}

.go-arrow {
  margin-top: -4px;
  margin-right: -4px;
  color: white;
  font-family: courier, sans;
}

.card {
  display: block;
  position: relative;
  max-width: 300px;
  max-height: 320px;
  background-color: #f2f8f9;
  border-radius: 10px;
  padding: 2em 1.2em;
  margin: 12px;
  text-decoration: none;
  z-index: 0;
  overflow: hidden;
  background: linear-gradient(to bottom, #c3e6ec, #a7d1d9);
  font-family: Arial, Helvetica, sans-serif;
}

.card:before {
  content: '';
  position: absolute;
  z-index: -1;
  top: -16px;
  right: -16px;
  background: linear-gradient(135deg, #364a60, #384c6c);
  height: 32px;
  width: 32px;
  border-radius: 32px;
  transform: scale(1);
  transform-origin: 50% 50%;
  transition: transform 0.35s ease-out;
}

.card:hover:before {
  transform: scale(28);
}

.card:hover .small-desc {
  transition: all 0.5s ease-out;
  color: rgba(255, 255, 255, 0.8);
}

.card:hover .card-title {
  transition: all 0.5s ease-out;
  color: #ffffff;
}
  </style>
</head>

<body>
  <div class="modal fade" id="resultadoModal" tabindex="-1" aria-labelledby="resultadoModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="resultadoModalLabel">Resultados</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p id="resultadoModalBody"></p>
          <p id="promedioModalBody"></p>
          <p id="tierModalBody"></p>
          <p id="montoBrutoModalBody"></p>
          <p id="montoNetoModalBody"></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
  <nav class="navbar navbar-expand-lg navbar-dark p-2 flex-fill" style="background-color: #03577b;">
    <div class="container-fluid">
      <a class="navbar-brand d-flex align-items-center" href="/">
        <img src="logo_de_una_x_azul_que_sea.jpeg" alt="Logo" style="width: 30px; height: 30px; margin-right: 10px;">
        Xsellneta
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-center" id="navbarNavDropdown">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Calculadora</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#como-funciona">¿Cómo funciona?</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#contacto">Contacto</a>
          </li>
          
        </ul>
      </div>
    </div>
  </nav>
 <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@900&display=swap" rel="stylesheet">
<h2 class="display-4 text-center mt-5 mb-5" style="color:#000; font-weight: 900; font-family: 'Roboto', sans-serif;" id="como-funciona">¿Cómo funciona?</h2>
<div class="row">
  <div class="col-lg-4 col-md-4 col-sm-12 mb-4">
    <div class="card h-100">
      <p class="card-title">Paso 1: Ingresa tus datos</p>
      <p class="small-desc">
        Ingresa uno a uno el porcentaje (%) de tus 3 carteras y, si corresponde, el monto del adelanto solicitado.
        Ten en cuenta que la última cartera ingresada será el porcentaje que se utilizará para calcular tu comisión, y según el promedio de las carteras, se determinará el TIER correspondiente.
      </p>
      <div class="go-corner">
        <div class="go-arrow">→</div>
      </div>
    </div>
  </div>
  <div class="col-lg-4 col-md-4 col-sm-12 mb-4">
    <div class="card h-100">
      <p class="card-title">Paso 2: Haz clic en 'Calcular'.</p>
      <p class="small-desc">
        La calculadora te proporcionará un desglose detallado de tus ingresos, que incluye:
          - Monto a cobrar bruto.
          - Cual es tu Tier.
          - Monto a cobrar neto (descontando ganancias, aportes y adelantos solicitados).
          - También te brindará el porcentaje de ganancias y de aportes que se retuvo."
      </p>
      <div class="go-corner">
        <div class="go-arrow">→</div>
      </div>
    </div>
  </div>
  <div class="col-lg-4 col-md-4 col-sm-12 mb-4">
    <div class="card h-100">
      <p class="card-title">Paso 3:</p>
      <p class="small-desc">
        Disfruta la facilidad de tener un control más detallado de tu sueldo sin sorpresas.
        Extra: Si necesitas la cotización del dólar oficial, esta se actualiza en tiempo real.
      </p>
      <div class="go-corner">
        <div class="go-arrow">→</div>
      </div>
    </div>
  </div>
</div>
  <div class="calculadora border rounded p-4 shadow-sm mt-5 position-relative" style="min-height: 400px; background-color: #4682B4">
    <div class="row">
      <div class="col-lg-6">
        <h2 type="title" class="calm-landings-library-section-title__title text-center mb-4" style="color:#fff">¿Pero... cuánto voy a cobrar?</h2>
        <form id="formulario" class="row g-3 p-2 mt-2" style="width: 100%; margin: 0 auto;">
          <div class="col-md-4 p-2 flex-fill text-center">
            <label for="cartera1" class="form-label fw-bold" style="color: #fff;">Cartera 1</label>
            <input type="number" class="form-control text-center" id="cartera1" value="" required>
          </div>
          <div class="col-md-4 p-2 flex-fill text-center">
            <label for="cartera2" class="form-label fw-bold" style="color: #fff;">Cartera 2</label>
            <input type="number" class="form-control text-center" id="cartera2" value="" required>
          </div>
          <div class="col-md-4 p-2 flex-fill text-center">
            <label for="cartera3" class="form-label fw-bold" style="color: #fff;">Cartera 3</label>
            <input type="number" class="form-control text-center" id="cartera3" value="" required>
          </div>
          <div class="col-md-4 p-2 flex-fill text-center">
            <label for="adelanto" class="form-label fw-bold" style="color: #fff;">Adelanto</label>
            <input type="number" class="form-control text-center" id="adelanto" value="0" required>
          </div>
          <div class="col-12 text-center">
            <button type="button" class="btn btn-primary" onclick="calcular()">Calcular</button>
          </div>
        </form>
      </div>
      <div class="col-lg-6">
        <h2 type="title" class="calm-landings-library-section-title__title text-center mb-4" style="color:#fff">Cotización en vivo</h2>
        <div class="d-flex justify-content-center">
          <iframe style="width:320px;height:260px;border-radius:10px;box-shadow:2px 4px 4px rgb(0 0 0 / 25%);display:flex;justify-content:center;border:1px solid #bcbcbc" src="https://dolarhoy.com/i/cotizaciones/dolar-blue" frameborder="0"></iframe>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="resultadoModal" tabindex="-1" aria-labelledby="resultadoModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="resultadoModalLabel">Resultados</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p id="resultadoModalBody"></p>
          <p id="promedioModalBody"></p>
          <p id="tierModalBody"></p>
          <p id="montoBrutoModalBody"></p>
          <p id="montoNetoModalBody"></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <footer class="bg-dark text-white mt-5 p-4" id="contacto">
    <div class="d-flex justify-content-center align-items-center">
      <p class="me-3">&copy; Damian Mayorano</p>
      <p class="me-3">Teléfono: 1124070486</p>
      <p class="me-3">Correo: <a href="mailto:damianmayorano@gmail.com" class="text-white">damianmayorano@gmail.com</a></p>
      <p class="me-3">LinkedIn: <a href="https://www.linkedin.com/in/damian-mayorano-45004219b/" class="text-white">Mi Perfil</a></p>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8z8O7zpdJ1a6vzcg8Z624ogAKA9eKE4yQM6Af3zH/AbebHa" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBNt8Ev/8AutEk+9/d39XXFA9ArgA6D1P/yiqUrQ=" crossorigin="anonymous"></script>
  <script>
const calculadora = document.querySelector('.calculadora');

window.addEventListener('scroll', () => {
  const scrollPosition = window.scrollY;
  const triggerPoint = 100; // ajusta este valor según sea necesario

  if (scrollPosition > triggerPoint) {
    calculadora.classList.add('animate');
  }
});
function calcular(){
  console.log("Calculando...");
  let cartera1 = parseFloat(document.getElementById("cartera1").value);
  let cartera2 = parseFloat(document.getElementById("cartera2").value);
  let cartera3 = parseFloat(document.getElementById("cartera3").value);
  let resultado = cartera1 + cartera2 + cartera3;
  let promedio = resultado / 3;

  let tier;
  if (cartera1 < 100 || cartera2 < 100 || cartera3 < 100) {
    tier = "Bronce";
  } else {
    tier = determinarTier(promedio);
  }

  let montoBruto = calcularMonto(cartera1, cartera2, cartera3, promedio, tier);
  let montoAdelanto = parseFloat(document.getElementById("adelanto").value);
  let resultadoSueldoNeto = calcularSueldoNeto(montoBruto);
  let montoNetoFinal = resultadoSueldoNeto.sueldoNeto - montoAdelanto;

  document.getElementById("resultadoModalBody").innerHTML = "La suma de tus carteras es: " + resultado.toFixed(2);
  document.getElementById("promedioModalBody").innerHTML = "El promedio de tus carteras es: " + promedio.toFixed(2);
  document.getElementById("tierModalBody").innerHTML = "Tier: " + tier;
  document.getElementById("montoBrutoModalBody").innerHTML = "El monto a cobrar bruto es: $" + montoBruto.toLocaleString("es-AR");
  document.getElementById("montoNetoModalBody").innerHTML = `
  - El monto a cobrar neto es: $${resultadoSueldoNeto.sueldoNeto.toLocaleString("es-AR")}
  - Retención de ganancias: $${resultadoSueldoNeto.retencionGanancias.toLocaleString("es-AR")} (${calcularRetencion(montoBruto).alicuota}%)
  - Aportes: $${resultadoSueldoNeto.retencionIG.toLocaleString("es-AR")} (17%)
  - Adelanto: $${montoAdelanto.toLocaleString("es-AR")}
  - Monto neto final: <b>$${montoNetoFinal.toLocaleString("es-AR")}</b>
`;
  var modal = document.getElementById('resultadoModal');
      modal.classList.add('show');
      document.body.classList.add('modal-open');

      var closeButtons = document.querySelectorAll('#resultadoModal .btn-close, #resultadoModal .btn-secondary');
      closeButtons.forEach(function(button) {
        button.addEventListener('click', function() {
          modal.classList.remove('show');
          document.body.classList.remove('modal-open');
        });
      });
    }
    function determinarTier(promedio){
      if (promedio < 80 || promedio < 100 && promedio >= 80) {
        return "Bronce";
      } else if (promedio >= 125 && promedio <= 200) {
        return "Plata";
      } else if (promedio > 200) {
        return "Oro";
      } else if (promedio < 100){
        return "Bronce";
      } else {
        return "Bronce";
      }
    }

    function calcularMonto(cartera1, cartera2, cartera3, promedio, tier){
  let ultimaCartera = cartera3;

  if (tier === "Bronce") {
    return calcularTierBronce(ultimaCartera);
  } else {
    switch (tier) {
      case "Plata":
        return calcularTierPlata(ultimaCartera);
      case "Oro":
        return calcularTierOro(ultimaCartera);
      default:
        return calcularTierBronce(ultimaCartera); // Tier Bronce por defecto
    }
  }
}
    
function calcularTierBronce(cartera) {
  if (cartera < 80) {
    return 1000000;
  } else if (cartera < 90) {
    return 1134400;
  } else if (cartera < 100) {
    return 1264600;
  } else if (cartera < 120) {
    return 1420000;
  } else if (cartera < 170) {
    return 1554400;
  } else if (cartera < 220) {
    return 1856800;
  } else if (cartera < 270) {
    return 2201200;
  } else if (cartera < 320) {
    return 2587600;
  } else {
    return 3016000;
  }
}

function calcularTierPlata(cartera) {
  if (cartera < 100) {
    return 1504000;
  } else if (cartera < 120) {
    return 1504000; // no hay valor para 100-119, asumiendo 100%
  } else if (cartera < 170) {
    return 1665280;
  } else if (cartera < 220) {
    return 2028160;
  } else if (cartera < 270) {
    return 2441440;
  } else if (cartera < 320) {
    return 2905120;
  } else {
    return 3419200;
  }
}

function calcularTierOro(cartera) {
  if (cartera < 100) {
    return 1604800;
  } else if (cartera < 120) {
    return 1604800; // no hay valor para 100-119, asumiendo 100%
  } else if (cartera < 170) {
    return 1798336;
  } else if (cartera < 220) {
    return 2233792;
  } else if (cartera < 270) {
    return 2729728;
  } else if (cartera < 320) {
    return 3286144;
  } else {
    return 3903040;
  }
}


    function calcularMontoNeto(montoBruto){
      return Math.round(montoBruto * 0.83);
    }

function calcularRetencion(sueldoBruto) {
  let retencion = 0;
  let alicuota = 0;

  if (sueldoBruto <= 2300000) {
    retencion = 0;
    alicuota = 0;
  } else if (sueldoBruto <= 2654060) {
    retencion = Math.round((sueldoBruto - 2300000) * 0.05);
    alicuota = 5;
  } else if (sueldoBruto <= 3000000) {
    retencion = Math.round(17631 + (sueldoBruto - 2654060) * 0.12);
    alicuota = 12;
  } else if (sueldoBruto <= 3005029) {
    retencion = Math.round(32588 + (sueldoBruto - 3000000) * 0.19);
    alicuota = 19;
  } else if (sueldoBruto <= 3500000) {
    retencion = Math.round(80196 + (sueldoBruto - 3005029) * 0.19);
    alicuota = 19;
  } else if (sueldoBruto <= 3750000) {
    retencion = Math.round(184668 + (sueldoBruto - 3500000) * 0.23);
    alicuota = 23;
  } else if (sueldoBruto <= 4000000) {
    retencion = Math.round(246960 + (sueldoBruto - 3750000) * 0.23);
    alicuota = 23;
  } else if (sueldoBruto <= 4500000) {
    retencion = Math.round(310703 + (sueldoBruto - 4000000) * 0.27);
    alicuota = 27;
  } else if (sueldoBruto <= 5000000) {
    retencion = Math.round(456953 + (sueldoBruto - 4500000) * 0.27);
    alicuota = 27;
  } else if (sueldoBruto <= 5500000) {
    retencion = Math.round(613779 + (sueldoBruto - 5000000) * 0.31);
    alicuota = 31;
  } else if (sueldoBruto <= 6000000) {
    retencion = Math.round(781696 + (sueldoBruto - 5500000) * 0.31);
    alicuota = 31;
  } else if (sueldoBruto <= 6500000) {
    retencion = Math.round(952209 + (sueldoBruto - 6000000) * 0.35);
    alicuota = 35;
  } else {
    retencion = Math.round(1141793 + (sueldoBruto - 6500000) * 0.35);
    alicuota = 35;
  }

  return { retencion, alicuota };
}
function calcularSueldoNeto(sueldoBruto) {
  let retencionIG = sueldoBruto * 0.17;
  let retencionGanancias = calcularRetencion(sueldoBruto).retencion;
  let sueldoNetoAntesGanancias = sueldoBruto - retencionIG;
  let sueldoNeto = sueldoNetoAntesGanancias - retencionGanancias;

  return {
    retencionGanancias,
    retencionIG,
    sueldoNeto
  };
}

  </script>
</body>
</html>
